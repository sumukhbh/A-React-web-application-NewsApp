{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\sumuk\\\\HW8 Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\sumuk\\\\HW8 Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\sumuk\\\\HW8 Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\sumuk\\\\HW8 Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\sumuk\\\\HW8 Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import{withRouter}from\"react-router-dom\";import{Card,Container,Row,Col}from\"react-bootstrap\";import Spinner from\"./Spinner\";import{EmailShareButton,FacebookShareButton,TwitterShareButton}from\"react-share\";import{EmailIcon,FacebookIcon,TwitterIcon}from\"react-share\";import{FaRegBookmark,FaBookmark}from\"react-icons/fa\";import CommentBox from\"./CommentBox\";import{FaAngleDown,FaAngleUp}from\"react-icons/fa\";import ReactTooltip from'react-tooltip';import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{css}from\"glamor\";toast.configure();var DetailedArticle=/*#__PURE__*/function(_React$Component){_inherits(DetailedArticle,_React$Component);var _super=_createSuper(DetailedArticle);function DetailedArticle(){var _this;_classCallCheck(this,DetailedArticle);_this=_super.call(this);_this.state={Loading:true,article:[],init:true,fulldesc:false,bookmark:false};_this.myRef=React.createRef();_this.CommentHandler=_this.CommentHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(DetailedArticle,[{key:\"ScrollContent\",value:function ScrollContent(){this.setState({fulldesc:!this.state.fulldesc},this.ScrollArticle);}},{key:\"ScrollArticle\",value:function ScrollArticle(){if(this.state.fulldesc===false){window.scrollTo({top:0,left:1,behavior:'smooth'});}if(this.state.fulldesc===true){console.log(this.myRef.current.getBoundingClientRect()[\"y\"]);window.scrollTo({top:this.myRef.current.getBoundingClientRect().top+window.scrollY+500,behavior:'smooth'});}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var articleId=window.location.search.substring(4,window.location.search.length);if(articleId.startsWith(\"https\")){fetch(\"https://hw8-backend.azurewebsites.net/NYtimesdetailed?id=\"+articleId).then(function(response){return response.json();}).then(function(response){var articles=response.result;_this2.setState({article:articles,Loading:false});});}else{fetch(\"https://hw8-backend.azurewebsites.net/guardiandetailed?id=\"+articleId).then(function(response){return response.json();}).then(function(response){var articles=response.result;_this2.setState({article:articles,Loading:false});});}}},{key:\"Splitter\",value:function Splitter(props){var _this3=this;var desc=props.description.split(\".\");var sliceval1=desc.slice(0,4).join(\".\")+\".\";var sliceval2=desc.slice(4).join(\".\")+\".\";if(this.state.init&&desc.length>4){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\" \",sliceval1,\" \"),/*#__PURE__*/React.createElement(FaAngleDown,{onClick:function onClick(){_this3.setState({init:false});_this3.Splitter(props);_this3.ScrollContent();},size:22,style:{float:\"right\"}}));}else if(this.state.init&&desc.length<=4){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\" \",sliceval1,\" \"));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\" \",sliceval1,\" \"),/*#__PURE__*/React.createElement(\"div\",{ref:this.myRef},\" \",sliceval2,\" \"),/*#__PURE__*/React.createElement(FaAngleUp,{onClick:function onClick(){_this3.setState({init:true});_this3.Splitter(props);_this3.ScrollContent();},size:22,style:{float:\"right\"}}));}}},{key:\"CommentHandler\",value:function CommentHandler(val){var substr=\"https://\";if(val.includes(substr)){var newval=val.slice(8);return newval;}else{return val;}}},{key:\"AddBookMark\",value:function AddBookMark(vals){var res=JSON.parse(localStorage.getItem(\"articles\"));if(res===null){res=[];}res.push(vals);localStorage.setItem(\"articles\",JSON.stringify(res));this.setState({bookmark:true});toast(\"Saving\"+\" \"+vals.title,{position:toast.POSITION.TOP_CENTER,hideProgressBar:true,className:css({color:\"black\"})});}},{key:\"DeleteBookMark\",value:function DeleteBookMark(vals){var idvalue=vals.id;var temp=[];var res=JSON.parse(localStorage.getItem(\"articles\"));console.log(res);for(var i=0;i<res.length;i++){if(res[i].id!=idvalue){temp.push(res[i]);}}localStorage.setItem(\"articles\",JSON.stringify(temp));this.setState({bookmark:false});toast(\"Removing\"+\" \"+vals.title,{position:toast.POSITION.TOP_CENTER,hideProgressBar:true,className:css({color:\"black\"})});}},{key:\"displayItem\",value:function displayItem(props){var _this4=this;console.log(props);var bookMark=\"\";var newkey=this.CommentHandler(props.id);var artLst=JSON.parse(localStorage.getItem(\"articles\"));if(artLst==null||artLst.length===0){bookMark=/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this4.AddBookMark(props);},style:{color:\"red\"}},\" \",/*#__PURE__*/React.createElement(FaRegBookmark,{size:20,\"data-tip\":\"Bookmark\"})),/*#__PURE__*/React.createElement(ReactTooltip,null));}else{for(var j=0;j<artLst.length;j++){if(artLst[j].id!=props.id){bookMark=/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this4.AddBookMark(props);},style:{color:\"red\"}},\" \",/*#__PURE__*/React.createElement(FaRegBookmark,{size:20,\"data-tip\":\"Bookmark\"}),/*#__PURE__*/React.createElement(ReactTooltip,null));}else{bookMark=/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this4.DeleteBookMark(props);},style:{color:\"red\"}},\" \",/*#__PURE__*/React.createElement(FaBookmark,{size:20,\"data-tip\":\"Bookmark\"}),/*#__PURE__*/React.createElement(ReactTooltip,null));break;}}}return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Card,{style:{boxShadow:'0px 0px 12px #333',marginTop:'2%',width:'98%',cursor:'pointer'}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card.Title,{style:{fontSize:\"200%\",fontStyle:'italic',paddingTop:\"2%\",paddingLeft:\"2%\",paddingRight:\"2%\"}},props.title))),/*#__PURE__*/React.createElement(Card.Body,{style:{marginTop:'-1.75%'}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:5,lg:9,xl:9,sm:9,md:9},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:'550',fontStyle:'italic',marginTop:\"-5%\",marginLeft:\"0.5%\"}},props.date)),/*#__PURE__*/React.createElement(Col,{xs:5,lg:2,sm:2,md:2,xl:2},/*#__PURE__*/React.createElement(FacebookShareButton,{\"data-tip\":\"Facebook\",url:props.url,hashtag:\"#CSCI_571_NewsApp\"},/*#__PURE__*/React.createElement(FacebookIcon,{size:30,round:true})),/*#__PURE__*/React.createElement(TwitterShareButton,{\"data-tip\":\"Twitter\",url:props.url,hashtags:[\"CSCI_571_NewsApp\"]},/*#__PURE__*/React.createElement(TwitterIcon,{size:30,round:true})),/*#__PURE__*/React.createElement(EmailShareButton,{\"data-tip\":\"Email\",url:props.url,subject:\"#CSCI_571_NewsApp\"},/*#__PURE__*/React.createElement(EmailIcon,{size:30,round:true})),/*#__PURE__*/React.createElement(ReactTooltip,null)),/*#__PURE__*/React.createElement(Col,{xs:2,lg:1,xl:1,sm:1,md:1},bookMark)),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Card.Img,{src:props.imageURL,alt:\"\",height:\"auto\",width:\"auto\",style:{objectFit:'cover',padding:'0.2%',border:'solid 0.5px lightgray',float:'left',marginTop:\"0.5%\"}})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"span\",null,\" \",this.Splitter(props),\" \")))),/*#__PURE__*/React.createElement(CommentBox,{vals:newkey}));}},{key:\"render\",value:function render(){var _this5=this;if(this.state.article.length>0){return/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'2%',marginLeft:\"2%\"}},this.state.article.map(function(item){return _this5.displayItem(item);}));}else{return/*#__PURE__*/React.createElement(Spinner,null);}}}]);return DetailedArticle;}(React.Component);export default withRouter(DetailedArticle);","map":{"version":3,"sources":["C:/Users/sumuk/HW8 Frontend/src/DetailedArticle.js"],"names":["React","withRouter","Card","Container","Row","Col","Spinner","EmailShareButton","FacebookShareButton","TwitterShareButton","EmailIcon","FacebookIcon","TwitterIcon","FaRegBookmark","FaBookmark","CommentBox","FaAngleDown","FaAngleUp","ReactTooltip","toast","css","configure","DetailedArticle","state","Loading","article","init","fulldesc","bookmark","myRef","createRef","CommentHandler","bind","setState","ScrollArticle","window","scrollTo","top","left","behavior","console","log","current","getBoundingClientRect","scrollY","articleId","location","search","substring","length","startsWith","fetch","then","response","json","articles","result","props","desc","description","split","sliceval1","slice","join","sliceval2","Splitter","ScrollContent","float","val","substr","includes","newval","vals","res","JSON","parse","localStorage","getItem","push","setItem","stringify","title","position","POSITION","TOP_CENTER","hideProgressBar","className","color","idvalue","id","temp","i","bookMark","newkey","artLst","AddBookMark","j","DeleteBookMark","boxShadow","marginTop","width","cursor","fontSize","fontStyle","paddingTop","paddingLeft","paddingRight","fontWeight","marginLeft","date","url","imageURL","objectFit","padding","border","marginBottom","map","item","displayItem","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\nimport {Card,Container,Row,Col} from \"react-bootstrap\"\r\nimport Spinner from \"./Spinner\"\r\nimport {EmailShareButton,\r\n    FacebookShareButton, TwitterShareButton} from \"react-share\"\r\nimport {EmailIcon,FacebookIcon,TwitterIcon} from \"react-share\"\r\nimport {FaRegBookmark, FaBookmark} from \"react-icons/fa\"\r\nimport CommentBox from \"./CommentBox\"\r\nimport {FaAngleDown, FaAngleUp} from \"react-icons/fa\"\r\nimport ReactTooltip from 'react-tooltip'\r\nimport {toast} from \"react-toastify\"\r\nimport \"react-toastify/dist/ReactToastify.css\"\r\nimport { css } from \"glamor\"\r\n\r\n\r\ntoast.configure()\r\nclass DetailedArticle extends React.Component {\r\n    constructor(){\r\n        super()\r\n    this.state = {\r\n        Loading: true,\r\n        article: [],\r\n        init: true,\r\n        fulldesc:false,\r\n        bookmark: false\r\n    }\r\n    this.myRef = React.createRef()\r\n    this.CommentHandler  = this.CommentHandler.bind(this)\r\n}\r\n\r\n      ScrollContent() {\r\n         this.setState({\r\n           fulldesc: !this.state.fulldesc\r\n          }, this.ScrollArticle)\r\n       }\r\n    \r\n\r\n      ScrollArticle() {\r\n        if(this.state.fulldesc === false){\r\n            window.scrollTo({top:0, left:1, behavior: 'smooth' })\r\n        }\r\n    \r\n        if(this.state.fulldesc === true){\r\n          console.log(this.myRef.current.getBoundingClientRect()[\"y\"])\r\n          window.scrollTo({top: this.myRef.current.getBoundingClientRect().top+window.scrollY+500, behavior: 'smooth'})\r\n        }\r\n}\r\n\r\n    componentDidMount() {\r\n        let articleId = window.location.search.substring(4,window.location.search.length)\r\n        if(articleId.startsWith(\"https\")){\r\n        fetch(\"https://hw8-backend.azurewebsites.net/NYtimesdetailed?id=\"+articleId).then(response => response.json())\r\n        .then(response => {\r\n            const articles = response.result\r\n         this.setState({ article: articles, Loading:false })\r\n        })\r\n        \r\n    }\r\n       else{\r\n          fetch(\"https://hw8-backend.azurewebsites.net/guardiandetailed?id=\"+articleId).then(response => response.json())\r\n          .then(response => {\r\n          const articles = response.result\r\n          this.setState({ article: articles, Loading:false })\r\n        })\r\n       }\r\n    }\r\n\r\n     Splitter(props) {\r\n         let desc = props.description.split(\".\")\r\n         let sliceval1 =  desc.slice(0,4).join(\".\")+\".\"\r\n         let sliceval2 = desc.slice(4,).join(\".\") + \".\"\r\n         if (this.state.init && desc.length > 4 ) {\r\n            return(\r\n             <div>\r\n             <div> {sliceval1} </div>\r\n             <FaAngleDown onClick={() => {this.setState({init:false});this.Splitter(props);this.ScrollContent()}} size={22} style={{float:\"right\"}}/>\r\n             </div>\r\n         )\r\n     }\r\n        else if(this.state.init && desc.length <= 4) {\r\n            return(\r\n            <div>\r\n             <div> {sliceval1} </div>\r\n            </div>\r\n            )\r\n\r\n        }\r\n         else{\r\n             return(\r\n                 <div>\r\n                 <div> {sliceval1} </div>\r\n                 <div ref={this.myRef}> {sliceval2} </div>\r\n                 <FaAngleUp onClick={() => {this.setState({init:true});this.Splitter(props);this.ScrollContent()}} size={22} style={{float:\"right\"}}/>\r\n                 </div>\r\n             )\r\n\r\n         }\r\n\r\n     }\r\n       CommentHandler(val) {\r\n           const substr = \"https://\"\r\n           if(val.includes(substr)) {\r\n               var newval = val.slice(8,)\r\n               return newval\r\n          }\r\n          else {\r\n              return val\r\n          }\r\n\r\n       }\r\n       AddBookMark(vals) {\r\n           var res = JSON.parse(localStorage.getItem(\"articles\"))\r\n           if (res === null){\r\n               res = []\r\n            }\r\n           res.push(vals)\r\n           localStorage.setItem(\"articles\", JSON.stringify(res))\r\n           this.setState({bookmark:true})\r\n           toast(\"Saving\" + \" \" + vals.title, {position:toast.POSITION.TOP_CENTER, hideProgressBar:true, className:css({color:\"black\"})})\r\n           \r\n       }\r\n\r\n       DeleteBookMark(vals) {\r\n           var idvalue = vals.id\r\n           var temp = []\r\n           var res = JSON.parse(localStorage.getItem(\"articles\"))\r\n           console.log(res)\r\n           for(var i=0; i<res.length; i++){\r\n               if (res[i].id != idvalue) {\r\n                   temp.push(res[i])\r\n             }\r\n            }\r\n            localStorage.setItem(\"articles\", JSON.stringify(temp))\r\n            this.setState({bookmark:false})\r\n            toast(\"Removing\" + \" \" + vals.title, {position:toast.POSITION.TOP_CENTER, hideProgressBar:true, className:css({color:\"black\"})})\r\n       }\r\n        \r\n        displayItem(props) {\r\n            console.log(props)\r\n            var bookMark = \"\"\r\n            var newkey =  this.CommentHandler(props.id)\r\n            var artLst = JSON.parse(localStorage.getItem(\"articles\"))\r\n            if (artLst == null || artLst.length === 0){\r\n                bookMark = <span><span onClick={() =>this.AddBookMark(props)} style={{color:\"red\"}}> <FaRegBookmark size={20} data-tip=\"Bookmark\" />\r\n                     </span>\r\n                     <ReactTooltip />\r\n                     </span>\r\n            }\r\n            else {    \r\n                for(var j=0;j<artLst.length;j++){\r\n                \r\n                if (artLst[j].id != props.id ) {\r\n                 bookMark  =  <span onClick={() =>this.AddBookMark(props)} style={{color:\"red\"}}> <FaRegBookmark size={20} data-tip=\"Bookmark\" />\r\n                 <ReactTooltip />\r\n                </span>\r\n                }\r\n                else{\r\n                 bookMark = <span onClick={() => this.DeleteBookMark(props)} style={{color:\"red\"}}> <FaBookmark size={20} data-tip=\"Bookmark\"/> \r\n                <ReactTooltip />\r\n                </span>\r\n                break\r\n            }\r\n        }\r\n    }\r\n\r\n            return(\r\n                <Container fluid={true}>\r\n                <Card style={{boxShadow:'0px 0px 12px #333', marginTop:'2%',width:'98%',cursor:'pointer'}}>\r\n                <Row>\r\n                <Col>\r\n               <Card.Title style={{fontSize:\"200%\",fontStyle:'italic',paddingTop:\"2%\", paddingLeft:\"2%\",paddingRight:\"2%\"}}>\r\n                  {props.title} \r\n                </Card.Title>\r\n                </Col>\r\n                </Row>\r\n                <Card.Body style={{marginTop:'-1.75%'}}>\r\n                <Row>\r\n                <Col xs={5} lg={9} xl={9} sm={9} md={9}>\r\n                <span style={{fontWeight:'550',fontStyle:'italic',marginTop:\"-5%\",marginLeft:\"0.5%\"}}>\r\n                    {props.date}\r\n                </span>\r\n                </Col>\r\n                 <Col xs={5} lg={2} sm={2} md={2} xl={2}>\r\n                 <FacebookShareButton data-tip=\"Facebook\" url={props.url} hashtag={\"#CSCI_571_NewsApp\"}><FacebookIcon size={30} round={true}></FacebookIcon></FacebookShareButton>\r\n                 <TwitterShareButton data-tip=\"Twitter\" url={props.url} hashtags={[\"CSCI_571_NewsApp\"]}><TwitterIcon size={30} round={true}></TwitterIcon></TwitterShareButton>\r\n                 <EmailShareButton data-tip=\"Email\" url={props.url} subject={\"#CSCI_571_NewsApp\"}><EmailIcon size={30} round={true}></EmailIcon></EmailShareButton>\r\n                 <ReactTooltip />\r\n                </Col>\r\n                <Col xs={2} lg={1} xl={1} sm={1} md={1}>\r\n                    {bookMark} \r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Card.Img src={props.imageURL} alt=\"\" height=\"auto\" width=\"auto\" style={{objectFit:'cover',padding:\r\n                    '0.2%', border:'solid 0.5px lightgray',float:'left', marginTop:\"0.5%\"}}/>\r\n                </Row>\r\n                <Row>\r\n                <span> {this.Splitter(props)} </span>\r\n                </Row>\r\n                </Card.Body>\r\n                </Card>\r\n                <CommentBox vals={newkey}/>\r\n                </Container>\r\n            )\r\n        \r\n        }\r\n        \r\n\r\n\r\n    render() {\r\n\r\n        if (this.state.article.length > 0) {\r\n           \r\n           return( \r\n               <div style={{marginBottom:'2%', marginLeft:\"2%\"}}>\r\n               {this.state.article.map((item) => this.displayItem(item))}\r\n               </div>\r\n           )\r\n        }\r\n        else{\r\n            return(<Spinner />)\r\n        }\r\n            \r\n        \r\n    }\r\n}\r\n\r\nexport default withRouter(DetailedArticle)"]},"metadata":{},"sourceType":"module"}